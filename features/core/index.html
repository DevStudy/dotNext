<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Base Class Library Enhancements | .NEXT </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Base Class Library Enhancements | .NEXT ">
    <meta name="generator" content="docfx 2.48.0.0">
    
    <link rel="shortcut icon" href="../../fav.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../doc_logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="base-class-library-enhancements">Base Class Library Enhancements</h1>

<h1 id="randomization">Randomization</h1>
<p>Related class: <a href="../../api/DotNext.RandomExtensions.html">RandomExtensions</a></p>
<p>Extension methods for random data generation extends both classes <a href="https://docs.microsoft.com/en-us/dotnet/api/system.random">Random</a> and <a href="https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.randomnumbergenerator">RandomNumberGenerator</a>.</p>
<h2 id="random-string-generation">Random string generation</h2>
<p>Provides a way to generate random string of the given length and set of allowed characters.</p>
<pre><code class="lang-csharp">using DotNext;
using System;

var rand = new Random();
var password = rand.NextString(&quot;abc123&quot;, 10);   
//now password has 10 characters
//each character is equal to 'a', 'b', 'c', '1', '2' or '3'
</code></pre>
<p>The same extension method is provided for class <a href="https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.randomnumbergenerator">RandomNumberGenerator</a>.</p>
<h2 id="random-boolean-generation">Random boolean generation</h2>
<p>Provides a way to generate boolean value with the given probability</p>
<pre><code class="lang-csharp">using DotNext;

var rand = new Random();
var b = rand.NextBoolean(0.3D); //0.3 is a probability of TRUE value
</code></pre>
<p>The same extension method is provided for class <a href="https://docs.microsoft.com/en-us/dotnet/api/system.security.cryptography.randomnumbergenerator">RandomNumberGenerator</a>.</p>
<h1 id="string-extensions">String extensions</h1>
<p>Related class: <a href="../../api/DotNext.StringExtensions.html">StringExtensions</a>.</p>
<h2 id="reverse-string">Reverse string</h2>
<p>Extension method <em>Reverse</em> allows to reverse string characters and returns a new string:</p>
<pre><code class="lang-csharp">using DotNext;

var str = &quot;abc&quot;.Reverse(); //str is &quot;cba&quot;
</code></pre>
<h2 id="trim-by-length">Trim by length</h2>
<p>Extension method <em>TrimLength</em> limits string length:</p>
<pre><code class="lang-csharp">using DotNext;

var str = &quot;abc&quot;.TrimLength(2);  //str is &quot;ab&quot;
str = &quot;abc&quot;.TrimLength(4);  //str is &quot;abc&quot;
</code></pre>
<h2 id="raw-data">Raw Data</h2>
<p>Extension method <em>GetRawData</em> allows to obtain managed pointer to the underlying char buffer referenced by the string instance. This method can be used in performance-critical paths in your code</p>
<pre><code class="lang-csharp">using DotNext;

ref readonly char ch = ref &quot;str&quot;.GetRawData();  //now ch points to the first string character of 's'
</code></pre>
<p>Returned managed pointer is immutable because instantiated string cannot be modified at runtime.</p>
<h1 id="delegates">Delegates</h1>
<p>Related classes: <a href="../../api/DotNext.StringExtensions.html">DelegateHelpers</a>, <a href="../../api/DotNext.Func.html">Func</a>, <a href="../../api/DotNext.Converter.html">Converter</a>, <a href="../../api/DotNext.Predicate.html">Predicate</a>.</p>
<h2 id="change-type-of-delegate">Change type of delegate</h2>
<p>Different types of delegates can refer to the same method. For instance, <code>Func&lt;string, string&gt;</code> represents the same signature as <code>Converter&lt;string, string&gt;</code>. It means that the delegate instance can be converted into another delegate type if signature matches.</p>
<pre><code class="lang-csharp">using DotNext;

Func&lt;string, int&gt; lengthOf = str =&gt; str.Length;
Converter&lt;string, int&gt; lengthOf2 = lengthOf.ChangeType&lt;Converter&lt;string, int&gt;&gt;();
</code></pre>
<h2 id="create-delegate-instance">Create delegate instance</h2>
<p>Statically-typed version of delegate creation method shipped with .NET Standard.</p>
<pre><code class="lang-csharp">using DotNext;

var parseInt = typeof(int).GetMethod(nameof(int.Parse)).CreateDelegate&lt;Func&lt;string, int&gt;&gt;();

</code></pre>
<h2 id="specialized-delegate-converters">Specialized delegate converters</h2>
<p>Conversion between mostly used delegate types: <a href="https://docs.microsoft.com/en-us/dotnet/api/system.predicate-1">Predicate&lt;T&gt;</a>, <a href="https://docs.microsoft.com/en-us/dotnet/api/system.func-2?view=netcore-3.0">Func&lt;T, TResult&gt;</a> and <a href="https://docs.microsoft.com/en-us/dotnet/api/system.converter-2">Converter&lt;TInput, TOutput&gt;</a>.</p>
<pre><code class="lang-csharp">using DotNext;

Predicate&lt;string&gt; isEmpty = str =&gt; str.Length == 0;
Func&lt;string, bool&gt; isEmptyFunc = isEmpty.AsFunc();
Converter&lt;string, bool&gt; isEmptyConv = isEmpty.AsConverter();
</code></pre>
<h2 id="predefined-delegates">Predefined delegates</h2>
<p>Cached delegate instances for mostly used delegate types: <a href="https://docs.microsoft.com/en-us/dotnet/api/system.predicate-1">Predicate&lt;T&gt;</a>, <a href="https://docs.microsoft.com/en-us/dotnet/api/system.func-2?view=netcore-3.0">Func&lt;T, TResult&gt;</a> and <a href="https://docs.microsoft.com/en-us/dotnet/api/system.converter-2">Converter&lt;TInput, TOutput&gt;</a>.</p>
<pre><code class="lang-csharp">using DotNext;

Func&lt;int, int&gt; identity = Func.Identity&lt;int&gt;(); //identity delegate which returns input argument without any changes
Predicate&lt;string&gt; truePredicate = Predicate.True&lt;string&gt;(); // predicate which always returns true
Predicate&lt;object&gt; falsePredicate = Predicate.False&lt;string&gt;(); //predicate which always returns false
Predicate&lt;string&gt; nullCheck = Predicate.IsNull&lt;string&gt;(); //predicate checking whether the input argument is null
Predicate&lt;string&gt; notNullCheck = Predicate.IsNotNull&lt;string&gt;(); //predicate checking whether the input argument is not null
</code></pre>
<h2 id="logical-operators-for-predicate">Logical operators for Predicate</h2>
<p>Extension methods implementation logical operators for Predicate delegate instances:</p>
<pre><code class="lang-csharp">using DotNext;

Predicate&lt;string&gt; predicate = str =&gt; str.Length == 0;
predicate = predicate.Negate();
predicate = predicate.And(str =&gt; str.Length &gt; 2);
predicate = predicate.Or(str =&gt; str.Length % 2 == 0);
predicate = predicate.Xor(Predicate.IsNull&lt;string&gt;());
</code></pre>
<h1 id="comparable-data-types">Comparable data types</h1>
<p>Related class: <a href="../../api/DotNext.Comparable.html">Comparable</a></p>
<h2 id="minmax-value">Min/max value</h2>
<p>Generic methods for comparable data types:</p>
<pre><code class="lang-csharp">using DotNext;

var str = &quot;ab&quot;.Max(&quot;bc&quot;); //str == &quot;bc&quot;
str = &quot;ab&quot;.Min(&quot;bc&quot;);
</code></pre>
<h2 id="range-check">Range check</h2>
<p>Checks whether the given value is in specific range.</p>
<pre><code class="lang-csharp">using DotNext;

var b = 10.Between(5, 11, BoundType.Closed); //b == true
b = 10.Between(0, 4); //b == false
var i = 5.Clamp(4, 10); //i == 5
i = 5.Clamp(6, 10); //i == 6
i = 5.Clamp(0, 4); //i == 4
</code></pre>
<h1 id="equality-check">Equality check</h1>
<p>Related classes: <a href="../../api/DotNext.ObjectExtensions.html">ObjectExtensions</a>, <a href="../../api/DotNext.ValueTypeExtensions.html">ValueTypeExtensions</a>.</p>
<p>Extension method <em>IsOneOf</em> allows to check whether the value is equal to one of the given values.</p>
<pre><code class="lang-csharp">using DotNext;

var b = 42.IsOneOf(0, 5, 42, 3); //b == true

b = &quot;a&quot;.IsOneOf(&quot;b&quot;, &quot;c&quot;, &quot;d&quot;); //b == false
</code></pre>
<h1 id="array-extensions">Array extensions</h1>
<p>Related classes: <a href="../../api/DotNext.OneDimensionalArray.html">OneDimensionalArray</a>.</p>
<p>Extension methods for slicing, iteration, conversion, element insertion and fast equality check between elements of two arrays.</p>
<h2 id="equality-check-1">Equality check</h2>
<p><em>BitwiseEquals</em> extension method performs bitwise equality between two regions of memory referenced by the arrays. Element type of these arrays should be of unmanaged value type, e.g. <code>int</code>, <code>long</code>, <code>System.Guid</code>.</p>
<pre><code class="lang-csharp">var array2 = new int[] { 1, 2, 3 };
array2.BitwiseEquals(new [] {1, 2, 4});    //false
</code></pre>
<p>This method is faster than naive implementation using <code>foreach</code> iteration and comparison by index. Read <a href="../../benchmarks.html">Benchmarks</a> for more information.</p>
<h2 id="functional-iteration">Functional iteration</h2>
<p>Extension method <code>ForEach</code> allows to iterate over array elements and, optionally, modify array element.</p>
<pre><code class="lang-csharp">var array = new string[] {&quot;ab&quot;, &quot;bc&quot; };
array.ForEach((long index, ref string element) =&gt; {
    if(element == &quot;ab&quot;)
        element = &quot;&quot;;
});
</code></pre>
<h2 id="insertion-and-removal">Insertion and Removal</h2>
<p>Extension methods <em>Insert</em>, <em>Slice</em>, <em>RemoveLast</em> and <em>RemoveFirst</em> allow to return modified array according with semantics of chosen method:</p>
<pre><code class="lang-csharp">var array = new string[] {&quot;a&quot;, &quot;b&quot;};
array = array.Insert(&quot;c&quot;, 2);   //array == new []{&quot;a&quot;, &quot;b&quot;, &quot;c&quot;}

array = array.RemoveLast(2);    //array == new []{&quot;a&quot;}

array = new string[] {&quot;a&quot;, &quot;b&quot;, &quot;c&quot;};
array = array.RemoveFirst(2);   //array == new []{&quot;c&quot;}

array = new string[]{&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;}; 
array = array.Slice(1, 2);      //array == new []{&quot;b&quot;, &quot;c&quot;}
</code></pre>
<h1 id="extensions-for-intptr-and-uintptr">Extensions for <code>IntPtr</code> and <code>UIntPtr</code></h1>
<p>Natural-sized integer data types <a href="https://docs.microsoft.com/en-us/dotnet/api/system.intptr">IntPtr</a> and <a href="https://docs.microsoft.com/en-us/dotnet/api/system.intptr">UIntPtr</a> have no arithmetic, bitwise, and comparison operators as other numeric types in .NET standard library. This is fixed by .NEXT library which provides implementation of these operators in the form of extension methods available for both types from <a href="../../api/DotNext.ValueTypeExtensions.html">ValueTypeExtensions</a> class.</p>
<p>These methods are implemented as intrinsics using inline IL code so they can be replaced by equivalent assembly instruction by JIT compiler. As a result, they the methods have the same performance as natively supported operators for regular numeric types.</p>
<p>The following example demonstrates how to use these methods:</p>
<pre><code class="lang-csharp">using DotNext;

var i = new IntPtr(40);
i = i.Add(new IntPtr(2));	//i == 42
if(i.GreaterThan(IntPtr.Zero))
	i = i.Subtract(new IntPtr(10));
else
	i = i.OnesComplement();	//equivalent to operator ~
</code></pre>
<h1 id="timestamp">Timestamp</h1>
<p><a href="https://sakno.github.io/dotNext/api/DotNext.Diagnostics.Timestamp.html">Timestamp</a> value type can be used as allocation-free alternative to <a href="https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.stopwatch">Stopwatch</a> when you need to measure time intervals.</p>
<pre><code class="lang-csharp">using DotNext.Diagnostics;
using System;

var timestamp = Timestamp.Current;
//long-running operation
Console.WriteLine(current.Elapsed);
</code></pre>
<p><code>Elapsed</code> property returning value of <a href="https://docs.microsoft.com/en-us/dotnet/api/system.timespan">TimeSpan</a> type which indicates the difference between <code>timestamp</code> and the current point in time.</p>
<p>This type should not be used as unique identifier of some point in time. The created time stamp may identify the time since the start of the process, OS, user session or whatever else.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/sakno/DotNext/blob/gh-pages-2.x/docs/features/core/index.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
