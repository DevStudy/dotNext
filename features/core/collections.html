<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Collection Enhancements | .NEXT </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Collection Enhancements | .NEXT ">
    <meta name="generator" content="docfx 2.48.0.0">
    
    <link rel="shortcut icon" href="../../fav.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    
    
  </head>  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../doc_logo.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="collection-enhancements">Collection Enhancements</h1>

<p>Collection Helpers are set of extension methods and classes aimed to improve <em>System.Linq.Enumerable</em> and .NET Collection types:</p>
<h1 id="read-only-mapped-view">Read-only mapped view</h1>
<p>Transformation of collection types can be done in lazy mode when item is converting on-demand without touching entire collection. Lazy converted collection is called <em>mapped view</em>.</p>
<p>There are several mapped views for different collection types:</p>
<ul>
<li><a href="../../api/DotNext.Collections.Generic.ReadOnlyListView-2.html">Read-only list view</a> for lists and arrays</li>
<li><a href="../../api/DotNext.Collections.Generic.ReadOnlyCollectionView-2.html">Read-only collection view</a> for generic collections without indexer support</li>
<li><a href="../../api/DotNext.Collections.Generic.ReadOnlyDictionaryView-3.html">Read-only dictionary view</a> for generic dictionaries</li>
</ul>
<p>The following example demonstrates how to obtain read-only mapped view for the list:</p>
<pre><code class="lang-csharp">using DotNext.Collections.Generic;
using System.Collections.Generic;

var list = new List&lt;string&gt;() { &quot;1&quot;, &quot;2&quot;, &quot;3&quot; };
var mappedList = list.Convert(int.Parse);
var first = mappedList[0];	//first == 1
</code></pre>
<h1 id="toarray">ToArray</h1>
<p>Extension method <em>ToArray</em> allows to convert arbitrary collection into array. Collection should implements <code>ICollection&lt;T&gt;</code> or <code>IReadOnlyCollection&lt;T&gt;</code> interface.</p>
<pre><code class="lang-csharp">using System.Collections.Generic;
using DotNext.Collections.Generic;

ICollection&lt;string&gt; collection = new string[] { &quot;a&quot;, &quot;b&quot;, &quot;c&quot; };
var array = collection.ToArray();   //array = new [] {&quot;a&quot;, &quot;b&quot;, &quot;c&quot; }
</code></pre>
<h1 id="singleton-list">Singleton list</h1>
<p>The library provides optimized version of the list with the single element in it.</p>
<pre><code class="lang-csharp">using DotNext.Collections.Generic;

IReadOnlyList&lt;string&gt; list = List.Singleton(&quot;a&quot;);
</code></pre>
<h1 id="stack-helper-methods">Stack helper methods</h1>
<p>The library provides safe versions of <em>Peek</em> and <em>Pop</em> methods which do not throw exceptions:</p>
<pre><code class="lang-csharp">using System.Collections.Generic;
using DotNext.Collections.Generic;

var stack = new Stack&lt;int&gt;();
if(stack.TryPeek(out var top))
{

}
if(stack.TryPop(out var top))
{

}
</code></pre>
<p>Additionally, there is a simple way to create a copy of the stack respecting order of the elements:</p>
<pre><code class="lang-csharp">using System.Collections.Generic;
using DotNext.Collections.Generic;

var stack = new Stack&lt;int&gt;();
stack = Stack.Clone(stack);
</code></pre>
<h1 id="collection-items-concatenation">Collection items concatenation</h1>
<p>Extension method <em>ToString</em> from class <a href="../../api/DotNext.Sequence.html">Sequence</a> allows to convert collection items into single plain string. Each item is separated by the specified delimiter.</p>
<pre><code class="lang-csharp">using DotNext;

var array = new int[] {1, 2, 3};
var str = array.ToString(&quot;,&quot;);  //str is 1,2,3
</code></pre>
<h1 id="iteration">Iteration</h1>
<p>Iteration in functional style is possible using extension method <em>ForEach</em> which is applicable to any type implementing interface <code>IEnumerable&lt;T&gt;</code>.</p>
<pre><code class="lang-csharp">using System;
using DotNext;

IEnumerable&lt;string&gt; list = new[] { &quot;a&quot;, &quot;b&quot;, &quot;c&quot; };
list.ForEach(item =&gt; Console.WriteLine(item));
</code></pre>
<h1 id="copyonwritelist">CopyOnWriteList</h1>
<p><a href="../../api/DotNext.Collections.Concurrent.CopyOnWriteList-1.html">CopyOnWriteList</a> is a thread-safe variant of <a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.list-1">List</a> in which all mutative operations (except element setter) are implemented by making a fresh copy of the underlying array.</p>
<p>This is ordinarily too costly, but may be more efficient than alternatives when traversal operations vastly outnumber mutations, and is useful when you cannot or don't want to synchronize traversals, yet need to preclude interference among concurrent threads. The &quot;snapshot&quot; style enumerator method uses a reference to the state of the array at the point that the enumerator was created. The size of array never changes during the lifetime of the enumerator, so interference is impossible and the enumerator is guaranteed not to throw <a href="https://docs.microsoft.com/en-us/dotnet/api/system.invalidoperationexception">InvalidOperationException</a>. The enumerator will not reflect additions or removals to/from the list since the eumerator was created.</p>
<p>All elements are permitted, including <strong>null</strong>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/sakno/DotNext/blob/gh-pages-2.x/docs/features/core/collections.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
